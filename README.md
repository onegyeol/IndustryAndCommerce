# 산업통상자원부 공모전 데이터분석 부문
NOx 예측 모델 개발 및 LLM 기술을 사용한 발전소 대기오염 관리 시스템 구축

## 요약
1. 데이터 수집 및 전처리
- NOx 데이터 기간 필터링: 2023-01-01 ~ 2024-12-31
- 발전소별 위도/경도 수집 (엑셀 or 수동 정리)
- 기상 API (OpenWeather 등)로 위치 기반 날씨 수집
- 산업부 연료 소비량 데이터 수집 → 업종, 지역 매핑
  
2. 모델 실험
- XGBoost와 LightGBM을 이용한 앙상블 모델
- NOx 데이터만으로 1차 학습
- 날씨 + 연료 소비량 포함해 2차 학습
- 성능 지표 비교 (RMSE, MAE 등)

## 기술 스택
[![stackticon](https://firebasestorage.googleapis.com/v0/b/stackticon-81399.appspot.com/o/images%2F1753144127364?alt=media&token=50939db4-7a47-497b-8805-456fbb6455e0)](https://github.com/msdio/stackticon)


## 모델 구조
-  예측 모델: XGBoost Regressor와 LightGBM 모델을 결합한 앙상블 회귀 모델
-  LLM 모델: Google Gemini 2.0 flash 모델
<img width="1738" height="277" alt="image" src="https://github.com/user-attachments/assets/7093c876-14da-4e4a-8733-f4edd23efdc1" />

## 데이터 전처리
### 1. 결측치 제거
원인: 시계열 기반 변수 생성 시(예:`NOX_lag1`, `NOX_roll3`, `연료소비_변화율`) 첫 시점에서 결측치가 발생함.
방식
- `groupby`, `shift`, `rolling` 등을 사용해 파생 변수 생성
- `min_periods=1` 설정으로 데이터 손실 최소화

### 2. 이상치 제거
- `NOX_kg` ≤ 5kg: 비정상적인 수치로 판단하여 제거
- IQR(Interquartile Range) 방법: `Q1`, `Q3`를 기준으로 IQR 계산
- 이상치 범위: [Q1 - 1.5×IQR, Q3 + 1.5×IQR]

### 3. 파생변수 생성
| 변수명          | 정의                                      | 목적 및 활용                     |
| ------------ | --------------------------------------- | --------------------------- |
| 연료\_소비량      | 유연탄 + 무연탄 + 석탄 + 유류 + LNG + 고형연료 + 우드펠릿 | NOx 배출량과 상관관계 높은 연료 총합을 지표화 |
| 온습도지수        | 온도 × 습도                                 | 복합적인 대기 환경 조건을 하나의 변수로 요약   |
| 연료\_x\_기온    | 연료소비량 × 온도                              | 연료 소비와 기온 간의 상호작용 반영        |
| 연료\_x\_습도    | 연료소비량 × 습도                              | 연료 소비와 습도 간의 상호작용 반영        |
| 연료\_효율       | 발전량(MWh) / 연료소비량                        | 효율이 낮을수록 NOx 배출 증가 가능성 고려   |
| 이용률\_효율      | 연료\_효율 / 설비 이용률(%)                      | 실제 운전 효율을 보정한 지표로 활용        |
| 연료\_x\_온습도지수 | 연료소비량 × 온도 × 습도                         | 고온다습 환경 + 고연료 소비 조건 반영      |
| 연료소비\_변화율    | 전월 대비 연료 소비량 변화율                        | 급격한 연료 변화 시 이상 배출량 탐지       |
| month\_sin   | sin(2π × 월 / 12)                        | 월(month)의 주기성 표현 (계절성 반영)   |
| month\_cos   | cos(2π × 월 / 12)                        | 위와 동일                       |
| 연료\_x\_월     | 연료소비량 × month\_sin                      | 연료 소비의 계절적 특성 반영            |
| NOX\_lag1    | 동일 호기의 NOX\_kg 1개월 전 값                  | 시계열 특성 반영 (운영 패턴 고려)        |
| NOX\_roll3   | NOX\_kg의 최근 3개월 이동평균                    | 단기 변동성 제거 → 안정적 학습 유도       |


## 모델 결과
<img width="1453" height="517" alt="스크린샷 2025-07-22 오전 9 37 27" src="https://github.com/user-attachments/assets/e843f131-74b4-4593-9765-242f1c9b5de6" />
<img width="1450" height="295" alt="스크린샷 2025-07-22 오전 9 37 53" src="https://github.com/user-attachments/assets/928b099d-9518-4d52-a236-84db79f7a6b9" />
<img width="1399" height="506" alt="스크린샷 2025-07-22 오전 9 38 25" src="https://github.com/user-attachments/assets/36e66072-21d0-46ab-b3f9-e9affa23ee30" />
계절적 변화나 월별 패턴에 대한 학습은 전반적으로 양호하였으나 비정상 운전 구간이나 급격한 운전 조건 변화에서는 예측 성능이 다소 떨어졌다. 이러한 오차는 일부 기간에 데이터 누락 또는 불완전한 입력값이 존재했기 때문으로 모델이 학습 과정에서 충분한 패턴을 확보하지 못한 데에서 발생했을 가능성이 크다.


## 활용 계획
- 질소산화물 예측 모델 개발을 통해 발생량 관점에서의 공정 최적화
- 발생 예측 가능성을 검증, 운전 전문가의 경험 기반에서의 시스템화를 통한 당사 업무 적용
